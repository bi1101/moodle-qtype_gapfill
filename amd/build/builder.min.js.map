{"version":3,"file":"builder.min.js","sources":["../src/builder.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * JavaScript code for the gapfill question type.\n *\n * @copyright  2020 Marcus Green\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n/**\n * Initialise code and indicate\n * if singlemode is in use. This is\n * where draggables dissapear once\n * they are used.\n *\n * @param {integer} singleUse\n */\nexport const init = (singleUse) => {\n  var gaps = document.querySelectorAll('input[id*=\"_p\"].droptarget');\n  // Clear gap on single click.\n  gaps.forEach(gap => {\n    gap.addEventListener('click', event => {\n      var gapValue = event.currentTarget.value;\n      restoreOption(gapValue);\n      gap.value = \"\";\n    });\n  });\n  /**\n   * Reveal draggables that are not\n   * the the current one\n   *\n   * @param {string} gapValue\n   */\n  function restoreOption(gapValue) {\n    document.querySelectorAll('span.draggable.answers').forEach(option => {\n      if (gapValue == option.innerText) {\n        option.classList.remove(\"hide\");\n      }\n    });\n  }\n\n  document.querySelectorAll('span.draggable.answers').forEach(option => {\n    option.addEventListener('click', event => {\n      var answeroption = event.currentTarget.textContent;\n      for (let i = 0; i < gaps.length; i++) {\n        if (!gaps[i].value) {\n          gaps[i].value = answeroption;\n          if (singleUse) {\n            option.classList.add(\"hide\");\n          }\n          return;\n        }\n      }\n    });\n  });\n};"],"names":["singleUse","gaps","document","querySelectorAll","forEach","gap","addEventListener","event","gapValue","option","innerText","classList","remove","restoreOption","currentTarget","value","answeroption","textContent","i","length","add"],"mappings":"0JA6BoB,SAACA,eACfC,KAAOC,SAASC,iBAAiB,8BAErCF,KAAKG,SAAQ,SAAAC,KACXA,IAAIC,iBAAiB,SAAS,SAAAC,iBAYTC,UACrBN,SAASC,iBAAiB,0BAA0BC,SAAQ,SAAAK,QACtDD,UAAYC,OAAOC,WACrBD,OAAOE,UAAUC,OAAO,WAb1BC,CADeN,MAAMO,cAAcC,OAEnCV,IAAIU,MAAQ,SAiBhBb,SAASC,iBAAiB,0BAA0BC,SAAQ,SAAAK,QAC1DA,OAAOH,iBAAiB,SAAS,SAAAC,eAC3BS,aAAeT,MAAMO,cAAcG,YAC9BC,EAAI,EAAGA,EAAIjB,KAAKkB,OAAQD,QAC1BjB,KAAKiB,GAAGH,aACXd,KAAKiB,GAAGH,MAAQC,kBACZhB,WACFS,OAAOE,UAAUS,IAAI"}