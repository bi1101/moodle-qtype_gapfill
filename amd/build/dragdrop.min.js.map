{"version":3,"file":"dragdrop.min.js","sources":["../src/dragdrop.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * JavaScript code for the gapfill question type.\n *\n * @copyright  2020 Marcus Green\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nexport const init = (singleuse) => {\n    Window.single = singleuse;\n    var draggables = document.getElementsByClassName('draggable');\n\n    draggables.forEach(function (e) {\n          e.addEventListener('dragstart', dragStart);\n    });\n\n  var droptargets = document.getElementsByClassName('droptarget');\n     droptargets.forEach(function (e) {\n          e.addEventListener(\"dragover\", function(event) {\n            event.preventDefault();\n          });\n\n          e.addEventListener(\"dblclick\", function(event) {\n            dragShow(this);\n          });\n\n          e.addEventListener(\"drop\", drop);\n      });\n      /**\n       *\n       * @param {*} that\n       */\n      function dragShow(that) {\n        var targetVal = that.value;\n        document.getElementsByClassName('draggable').forEach(function (e) {\n          if (e.innerText.trim() === targetVal.trim()) {\n              e.classList.remove(\"hide\");\n              that.value = \"\";\n          }\n        });\n      }\n\n  /**\n   *\n   * @param {*} e\n   */\n  function drop(e) {\n    e.target.value = e.dataTransfer.getData('text/plain');\n    var sourceId = e.dataTransfer.getData(\"sourceId\");\n    var sourceEl = document.getElementById(sourceId);\n    sourceEl.classList.add('hide');\n    e.preventDefault();\n  }\n  /**\n   *\n   * @param {*} e\n   */\n  function dragStart(e) {\n    e.currentTarget.cursor = 'move';\n    e.dataTransfer.setData('text/plain', e.target.innerText);\n    e.dataTransfer.setData('sourceId', this.id);\n  }\n};"],"names":["singleuse","drop","e","target","value","dataTransfer","getData","sourceId","document","getElementById","classList","add","preventDefault","dragStart","currentTarget","cursor","setData","innerText","this","id","Window","single","getElementsByClassName","forEach","addEventListener","event","that","targetVal","trim","remove"],"mappings":"2JAsBqBA,qBAsCVC,KAAKC,GACZA,EAAEC,OAAOC,MAAQF,EAAEG,aAAaC,QAAQ,kBACpCC,SAAWL,EAAEG,aAAaC,QAAQ,YACvBE,SAASC,eAAeF,UAC9BG,UAAUC,IAAI,QACvBT,EAAEU,0BAMKC,UAAUX,GACjBA,EAAEY,cAAcC,OAAS,OACzBb,EAAEG,aAAaW,QAAQ,aAAcd,EAAEC,OAAOc,WAC9Cf,EAAEG,aAAaW,QAAQ,WAAYE,KAAKC,IAnDxCC,OAAOC,OAASrB,UACCQ,SAASc,uBAAuB,aAEtCC,SAAQ,SAAUrB,GACvBA,EAAEsB,iBAAiB,YAAaX,cAGtBL,SAASc,uBAAuB,cACnCC,SAAQ,SAAUrB,GACzBA,EAAEsB,iBAAiB,YAAY,SAASC,OACtCA,MAAMb,oBAGRV,EAAEsB,iBAAiB,YAAY,SAASC,WAU1BC,KACZC,UAAAA,WADYD,KATHR,MAUQd,MACrBI,SAASc,uBAAuB,aAAaC,SAAQ,SAAUrB,GACzDA,EAAEe,UAAUW,SAAWD,UAAUC,SACjC1B,EAAEQ,UAAUmB,OAAO,QACnBH,KAAKtB,MAAQ,UAXjBF,EAAEsB,iBAAiB,OAAQvB"}