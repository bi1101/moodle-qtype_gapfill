{"version":3,"file":"dragdrop.min.js","sources":["../src/dragdrop.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * JavaScript code for the gapfill question type.\n *\n * @copyright  2020 Marcus Green\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nexport const init = (singleuse) => {\n    Window.singleuse = singleuse;\n    var draggables = document.getElementsByClassName('draggable');\n\n    draggables.forEach(function (e) {\n          e.addEventListener('dragstart', dragStart);\n    });\n\n  var droptargets = document.getElementsByClassName('droptarget');\n     droptargets.forEach(function (e) {\n          e.addEventListener(\"dragover\", function(event) {\n            event.preventDefault();\n          });\n\n          e.addEventListener(\"dblclick\", function() {\n            if (Window.singleuse) {\n               dragShow(this);\n            }\n            this.value = \"\";\n\n          });\n\n          e.addEventListener(\"drop\", drop);\n      });\n      /**\n       *\n       * @param {*} that\n       */\n      function dragShow(that) {\n        var targetVal = that.value;\n        document.getElementsByClassName('draggable').forEach(function (e) {\n          if (e.innerText.trim() === targetVal.trim()) {\n              e.classList.remove(\"hide\");\n              that.value = \"\";\n          }\n        });\n      }\n\n  /**\n   *\n   * @param {*} e\n   */\n  function drop(e) {\n    dragShow(this);\n    e.target.value = e.dataTransfer.getData('text/plain');\n    var sourceId = e.dataTransfer.getData(\"sourceId\");\n    var sourceEl = document.getElementById(sourceId);\n    if (Window.singleuse) {\n      sourceEl.classList.add('hide');\n      e.preventDefault();\n    }\n  }\n  /**\n   *\n   * @param {*} e\n   */\n  function dragStart(e) {\n    e.currentTarget.cursor = 'move';\n    e.dataTransfer.setData('text/plain', e.target.innerText);\n    e.dataTransfer.setData('sourceId', this.id);\n  }\n};"],"names":["singleuse","dragShow","that","targetVal","value","document","getElementsByClassName","forEach","e","innerText","trim","classList","remove","drop","this","target","dataTransfer","getData","sourceId","sourceEl","getElementById","Window","add","preventDefault","dragStart","currentTarget","cursor","setData","id","addEventListener","event"],"mappings":"2JAsBqBA,qBA4BNC,SAASC,UACZC,UAAYD,KAAKE,MACrBC,SAASC,uBAAuB,aAAaC,SAAQ,SAAUC,GACzDA,EAAEC,UAAUC,SAAWP,UAAUO,SACjCF,EAAEG,UAAUC,OAAO,QACnBV,KAAKE,MAAQ,gBAShBS,KAAKL,GACZP,SAASa,MACTN,EAAEO,OAAOX,MAAQI,EAAEQ,aAAaC,QAAQ,kBACpCC,SAAWV,EAAEQ,aAAaC,QAAQ,YAClCE,SAAWd,SAASe,eAAeF,UACnCG,OAAOrB,YACTmB,SAASR,UAAUW,IAAI,QACvBd,EAAEe,2BAOGC,UAAUhB,GACjBA,EAAEiB,cAAcC,OAAS,OACzBlB,EAAEQ,aAAaW,QAAQ,aAAcnB,EAAEO,OAAON,WAC9CD,EAAEQ,aAAaW,QAAQ,WAAYb,KAAKc,IA1DxCP,OAAOrB,UAAYA,UACFK,SAASC,uBAAuB,aAEtCC,SAAQ,SAAUC,GACvBA,EAAEqB,iBAAiB,YAAaL,cAGtBnB,SAASC,uBAAuB,cACnCC,SAAQ,SAAUC,GACzBA,EAAEqB,iBAAiB,YAAY,SAASC,OACtCA,MAAMP,oBAGRf,EAAEqB,iBAAiB,YAAY,WACzBR,OAAOrB,WACRC,SAASa,WAEPV,MAAQ,MAIfI,EAAEqB,iBAAiB,OAAQhB"}